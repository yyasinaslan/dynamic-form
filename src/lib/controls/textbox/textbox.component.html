<ng-template #inputTemplate>
  <input
    #inputRef
    (beforeinput)="beforeInput($event)"
    (blur)="onTouched(); ngyBlur.emit($event)"
    (click)="ngyClick.emit($event)"
    (contextmenu)="ngyContextMenu.emit($event)"
    (focus)="ngyFocus.emit($event)"
    (input)="inputEvent($event)"
    [disabled]="disabled"
    [id]="id + '_' + key"
    [name]="key"
    [ngClass]="{ 'ng-invalid': control?.invalid, 'ng-valid': control?.valid }"
    [placeholder]="placeholder | observableString"
    [readOnly]="readonly"
    [type]="inputType"
    [value]="this._val"
    class="form-control"/>
</ng-template>

<ng-template #floatingTemplate>
  <div class="form-floating">
    <ng-container [ngTemplateOutlet]="inputTemplate"/>
    <label [for]="id + '_' + key">{{ label | observableString }}</label>
  </div>
</ng-template>


<ng-container *ngIf="!floating; else floatingTemplate">
  <label [for]="id + '_' + key" class="form-label">{{ label | observableString }}</label>
  <ng-container [ngTemplateOutlet]="inputTemplate"/>
</ng-container>

<ng-content select="ngy-helper-text"></ng-content>
<ng-content select="ngy-invalid-message"></ng-content>
