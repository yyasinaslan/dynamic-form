<label class="form-label">{{ label | observableString }}</label>
<div
  [ngClass]="[orientation == 'horizontal' ? 'flex-row gap-3 align-items-center' : 'flex-column gap-2', control?.invalid ? 'ng-invalid':'ng-valid']"
  class="d-flex gap-1 flex-wrap">
  <ng-container *ngIf="inputType == 'checkbox'; else radioGroupTemplate">
    <div *ngFor="let option of _options; let index = index" class="form-check">
      <input
        (blur)="onTouched(); ngyBlur.emit($event)"
        (focus)="ngyFocus.emit($event)"
        (contextmenu)="ngyContextMenu.emit($event)"
        (click)="ngyClick.emit($event)"
        (change)="checkboxChanged($event, option.value)"
        [checked]="valIncludes(val,option.value)"
        [disabled]="disabled"
        [ngClass]="{ 'ng-invalid': control?.invalid, 'ng-valid': control?.valid }"
        [readOnly]="readonly"
        [value]="option.value"
        class="form-check-input"
        type="checkbox"/>
      <label (click)="labelClick(option)" class="form-check-label">{{ option.label | observableString}}</label>
    </div>
  </ng-container>
</div>

<ng-container *ngIf="helperTextTemplate && helperTextTemplate.templateRef">
  <div class="form-text">
    <ng-container [ngTemplateOutlet]="helperTextTemplate.templateRef"/>
  </div>
</ng-container>

<ng-container *ngIf="validatorsMessage && validatorsMessage.length > 0">
  <div class="ngy-invalid-feedback small">
    <ng-container *ngFor="let directive of validatorsMessage">
      <div *ngIf="control?.errors?.[directive.ngyValidatorMessage]">
        <ng-container [ngTemplateOutlet]="directive.templateRef"/>
      </div>
    </ng-container>
  </div>
</ng-container>


<ng-template #radioGroupTemplate>
  <div *ngFor="let option of _options" class="form-check">
    <input
      (blur)="onTouched()"
      (change)="radioChanged(option.value)"
      [checked]="compareWith(val, option.value)"
      [disabled]="disabled"
      [name]="key"
      [ngClass]="{ 'ng-invalid': control?.invalid, 'ng-valid': control?.valid }"
      [value]="option.value"
      class="form-check-input"
      type="radio"/>
    <label (click)="labelClick(option)" class="form-check-label">{{ option.label | observableString }}</label>
  </div>
</ng-template>
